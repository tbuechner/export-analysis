{
    "type": "custom_attribute",
    "code": "/*\n*Highchart\n*Displays the version history of the confidencelevel of keyResult type\n*/\n\nfunction generateData(embeddingPage) {\n    let data = [];\n\n    let confidenceValue = embeddingPage.getVersionHistoryOfAttribute('cf.cplace.solution.okr.confidenceLevel');\n    if (confidenceValue.length > 1) {\n        data = [{ y: 0, date: null }];\n        cplace.each(confidenceValue, function (cv) {\n            // cplace.log(cv.getNewValue());\n            let cvValue = cv.getNewValue() ? cv.getNewValue().toString() : '';\n            let cvDate = cv.getWhen();\n            let lastThree = cvValue.substr(cvValue.length - 3);\n            if (cvValue) {\n                data.push({\n                    y: parseFloat(lastThree),\n                    date: cvDate.toString()\n                });\n            } else {\n                data.push({\n                    y: 0.5,\n                    date: cvDate.toString()\n                })\n            }\n        })\n        data.push({ y: 1, date: null })\n    }\n    //cplace.log(data);\n    return data;\n}\n\n\nfunction main() {\n    const dataObj = generateData(embeddingPage);\n    return {\n        chart: {\n            height: 200,\n            backgroundColor: '#F2F4FA'\n        },\n        title: {\n            text: '<b>Confidence Value: ' + embeddingPage.get('cf.cplace.solution.okr.confidenceLevel') + '</b>',\n            align: 'center',\n            useHtml: true\n        },\n        xAxis: {\n            reversed: true,\n            min: 1,\n            max: dataObj.length - 2,\n            labels: {\n                enabled: false\n            },\n            lineColor: '#fcfcfc',\n            tickLength: 1,\n            showLastLabel: false,\n        },\n        yAxis: {\n            title: '',\n            min: 0,\n            max: 1,\n            labels: {\n                enabled: false\n            },\n            gridLineColor: 'rgba(255,255,255,0)',\n            lineColor: '#ffffff',\n        },\n        plotOptions: {\n            series: {\n                lineWidth: 7,\n                tickWidth: 10,\n                marker: {\n                    fillColor: 'rgba(0,0,0,.1)',\n                    radius: 6\n                }\n            }\n        },\n        legend: {\n            enabled: false\n        },\n        credits: {\n            enabled: false\n        },\n        series: [{\n            data: dataObj,\n            name: 'Confidence Levels',\n            color: {\n                linearGradient: {\n                    x1: 0,\n                    x2: 0,\n                    y1: 0,\n                    y2: 1\n                },\n                stops: [\n                    [0, 'rgba(174,219,60,1)'],\n                    [0.5, 'rgba(255,186,0,1)'],\n                    [1, 'rgba(219,15,53,1)']\n                ]\n            },\n        }],\n        tooltip: {\n            shared: true,\n            useHTML: true,\n            headerFormat: 'Confidence Level: ' + '<b>{point.y}</b><br>',\n            pointFormat: '--<br>{point.date}',\n        }\n    }\n}\n\nreturn main();",
    "attributes": null,
    "type_name": null,
    "counter": 35
}