{
    "type": "cf.cplace.platform.ChangeListener",
    "code": "/*\n*Changelistener\n*Type:Progress\n*Description: whenever the progressIndicator of the progress is changed this changelistener updates the same in keyResult\n*Triggering attribute : \n*Author: Laxmi udapudi\n*/\ncplace.setLogName('sync_progressIndicator_on_keyresult')\n\nconst KEY_RESULT = {\n  TYPE: 'cf.cplace.solution.okr.keyResult',\n  ATTR: {\n    TITLE: 'cf.cplace.solution.okr.title',\n    PROGRESS: 'cf.cplace.solution.okr.progress',\n    CONFIDENCELEVEL: 'cf.cplace.solution.okr.confidenceLevel',\n    GRADING_FORECAST: 'cf.cplace.solution.okr.gradingForecast',\n    PROGRESS_INDICATOR: 'cf.cplace.solution.okr.progressIndicator'\n\n  }\n}\nconst PROGRESS = {\n  TYPE: 'cf.cplace.solution.okr.progress',\n  ATTR: {\n    KEY_RESULT: 'cf.cplace.solution.okr.keyResult',\n    CONFIDENCELEVEL: 'cf.cplace.solution.okr.confidenceLevel',\n    GRADING_FORECAST: 'cf.cplace.solution.okr.gradingForecast',\n    PROGRESS_INDICATOR: 'cf.cplace.solution.okr.progressIndicator'\n  }\n}\n\nfunction main() {\n\n  let progress = changeEvent.getEntity();\n  let progressIndicator = progress.get(PROGRESS.ATTR.PROGRESS_INDICATOR);\n  let keyResult = progress.get(PROGRESS.ATTR.KEY_RESULT);\n  let processIndicator = keyResult.get(PROGRESS.ATTR.PROGRESS_INDICATOR);\n\n  if (!isSet(progress) || !isSet(progressIndicator)) {\n    // Nothing to sync with\n    return;\n  }\n\n  if (progressIndicator === processIndicator) {\n    return;\n  }\n\n  updatePage(keyResult, {\n    'cf.cplace.solution.okr.progressIndicator': progressIndicator\n  })\n}\n\nreturn main();\n\n// Check if a value is set\nfunction isSet(value) {\n  return !!value;\n}\n\n/*\n*Update the cplace page whenever there is change in attributes\n* @param {Page<T>} page\n* @param {(keyof CplaceTypes[T])[]} attributes\n*/\nfunction updatePage(page, customAttributes) {\n  let key = null;\n  for (key in customAttributes) {\n    if (customAttributes.hasOwnProperty(key)) {\n      page.registerAttributeForRefresh(key)\n    }\n  }\n  return cplace.actions().updatePage(page, {\n    customAttributes: customAttributes,\n  }\n    , {\n      setGeneratedName: true\n    }\n  );\n}",
    "attributes": [
        "cf.cplace.solution.okr.progressIndicator"
    ],
    "type_name": "cf.cplace.solution.okr.progress",
    "counter": 11
}