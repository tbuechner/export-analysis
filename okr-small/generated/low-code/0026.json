{
    "type": "custom_attribute",
    "code": "/// <reference path=\"../../typeDefinitions/cplaceJS_type.js\" />\n\n //--------------------------------------------------------------------------------------//\n //                                       CONFIGURATION                                  //\n //--------------------------------------------------------------------------------------//\n const DEBUG = true;\n\n //--------------------------------------------------------------------------------------//\n //                                       HELPER FUNCTIONS                               //\n //--------------------------------------------------------------------------------------//\n\n\n /**\n  * Log to cplace\n  * @param {any} text\n  */\n  function log(text) {\n    if (!DEBUG) {\n        return\n    }\n    let logOutput = (typeof text !== 'string') ? JSON.stringify(text) : text;\n\n    cplace.log(logOutput);\n}\n\n //--------------------------------------------------------------------------------------//\n //                                       BUSINESS FUNCTIONS                               //\n //--------------------------------------------------------------------------------------//\n\nfunction updatePage(progress) {\n\n  cplace.actions().updatePage(progress, {\n    customAttributes: {\n        'cf.cplace.solution.okr.lastUpdate': new DateTime()\n    }\n  });\n}\n\nreturn {\n    // \"checkAccess\" function will check if the button should be enabled given the current context\n    checkAccess: function() {\n        return true; // Allowed for all users\n    },\n    // \"call\" function contains the actual business logic and can optionally return an object\n    // containing a success message\n    call: function() {\n        log('Starting Low-Code button script \"okr-submitResults\" execution');\n        let allResults = embeddingPage.getIncomingPages('cf.cplace.solution.okr.progress', 'cf.cplace.solution.okr.objective');\n\n        allResults.forEach(function(result) {\n          updatePage(result);\n       });\n       cplace.actions().refresh();\n\n        return {\n           message: {\n             de: 'Erfolgreich beendet',\n             en: 'Finished successfully'\n           }\n        }\n    }\n}",
    "attributes": null,
    "type_name": null,
    "counter": 26
}